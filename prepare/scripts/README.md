# æ•°æ®ä¸Šä¼ è„šæœ¬

ç”¨äºå°†çŸ­è¯­æ•°æ®å’ŒéŸ³é¢‘æ–‡ä»¶ä¸Šä¼ åˆ°æ•°æ®åº“å’ŒVercel Blobã€‚

## ğŸ“ è„šæœ¬è¯´æ˜

### ä¸Šä¼ è„šæœ¬ï¼ˆTypeScriptï¼‰

| è„šæœ¬ | åŠŸèƒ½ | ä½¿ç”¨åœºæ™¯ |
|---------|------|---------|
| `upload_data.ts` | å®Œæ•´ä¸Šä¼ ï¼šéŸ³é¢‘â†’Blob + æ•°æ®â†’æ•°æ®åº“ | **é¦–æ¬¡éƒ¨ç½²æˆ–å…¨é‡æ›´æ–°** |
| `upload_audio_only.ts` | ä»…ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶åˆ°Vercel Blob | åªæ›´æ–°éŸ³é¢‘ |
| `upload_database_only.ts` | ä»…ä¸Šä¼ æ•°æ®åˆ°æ•°æ®åº“ | åªæ›´æ–°æ•°æ®ï¼ˆä¸æ”¹éŸ³é¢‘ï¼‰ |

## ğŸ”§ ç¯å¢ƒè¦æ±‚

### ä¸Šä¼ è„šæœ¬ä¾èµ–

```bash
npm install @neondatabase/serverless @vercel/blob dotenv
```

### éŸ³é¢‘ç”Ÿæˆè„šæœ¬ä¾èµ–

```bash
pip install -r requirements.txt
```

### ç¯å¢ƒå˜é‡

ç¡®ä¿ `.env.local` åŒ…å«ï¼š

```env
# æ•°æ®åº“è¿æ¥ï¼ˆä¸Šä¼ æ•°æ®æ—¶éœ€è¦ï¼‰
DATABASE_URL=postgresql://...

# Vercel Blob Tokenï¼ˆä¸Šä¼ éŸ³é¢‘æ—¶éœ€è¦ï¼‰
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_...
```

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### 1. å®Œæ•´ä¸Šä¼ ï¼ˆæ¨èé¦–æ¬¡ä½¿ç”¨ï¼‰

```bash
npx ts-node prepare/scripts/upload_data.ts
```

### 2. ä»…ä¸Šä¼ éŸ³é¢‘

```bash
npx ts-node prepare/scripts/upload_audio_only.ts
```

### 3. ä»…ä¸Šä¼ æ•°æ®åº“

```bash
npx ts-node prepare/scripts/upload_database_only.ts
```

### 4. ç”ŸæˆéŸ³é¢‘ï¼ˆå¦‚éœ€é‡æ–°ç”Ÿæˆï¼‰

```bash
# ç”Ÿæˆæ‰€æœ‰éŸ³é¢‘
cd prepare/scripts
python generate_audio_quality.py

# æ£€æŸ¥å¹¶è¡¥å……ç¼ºå¤±éŸ³é¢‘
python check_and_generate_audio.py
```

## ğŸ“Š æ•°æ®æµç¨‹

```
prepare/data/
â”œâ”€â”€ phrases_100_quality.json    â”€â”€â”
â””â”€â”€ audio/                        â”‚
    â”œâ”€â”€ phrases/                  â”‚
    â””â”€â”€ examples/                 â”‚
                                  â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚    upload_data.ts       â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                  â”‚
              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
              â–¼                                       â–¼
    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
    â”‚  Vercel Blob    â”‚                    â”‚   PostgreSQL    â”‚
    â”‚                 â”‚                    â”‚                 â”‚
    â”‚ audio/phrases/  â”‚                    â”‚  phrases è¡¨     â”‚
    â”‚ audio/examples/ â”‚                    â”‚  phrase_examplesâ”‚
    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## âš ï¸ æ³¨æ„äº‹é¡¹

1. **éŸ³é¢‘æ ¼å¼è½¬æ¢**ï¼šJSONä¸­éŸ³é¢‘è·¯å¾„æ˜¯ `.mp3`ï¼Œå®é™…æ–‡ä»¶æ˜¯ `.wav`ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨å¤„ç†
2. **é‡å¤ä¸Šä¼ **ï¼šè„šæœ¬ä¼šæ£€æŸ¥Blobä¸­æ˜¯å¦å·²å­˜åœ¨ç›¸åŒæ–‡ä»¶ï¼Œé¿å…é‡å¤ä¸Šä¼ 
3. **æ•°æ®æ¸…ç©º**ï¼šä¸Šä¼ æ•°æ®å‰ä¼šæ¸…ç©ºç°æœ‰æ•°æ®ï¼Œè¯·è°¨æ…æ“ä½œ
4. **æ‰¹é‡å¤„ç†**ï¼šéŸ³é¢‘ä¸Šä¼ é‡‡ç”¨æ‰¹é‡å¤„ç†ï¼Œæ¯æ‰¹5ä¸ªæ–‡ä»¶

## ğŸ› æ•…éšœæ’é™¤

### é”™è¯¯ï¼šBLOB_READ_WRITE_TOKEN is not defined

```bash
vercel env pull .env.local
```

### é”™è¯¯ï¼šDATABASE_URL is not defined

æ£€æŸ¥ `.env.local` æ–‡ä»¶æ˜¯å¦å­˜åœ¨ä¸”åŒ…å« DATABASE_URL

### éŸ³é¢‘ä¸Šä¼ å¤±è´¥

1. æ£€æŸ¥ `prepare/data/audio/` ç›®å½•æ˜¯å¦å­˜åœ¨éŸ³é¢‘æ–‡ä»¶
2. ç¡®è®¤ BLOB_READ_WRITE_TOKEN æœ‰æ•ˆ
3. æ£€æŸ¥Vercel Blobå­˜å‚¨ç©ºé—´æ˜¯å¦å……è¶³

## ğŸ“ˆ é¢„æœŸè¾“å‡º

```
ğŸš€ å¼€å§‹æ•°æ®ä¸Šä¼ æµç¨‹

==================================================

ğŸ“– è¯»å–æ•°æ®æ–‡ä»¶: .../prepare/data/phrases_100_quality.json
âœ… è¯»å–æˆåŠŸï¼Œå…± 100 ä¸ªçŸ­è¯­

ğŸµ å¼€å§‹ä¸Šä¼ éŸ³é¢‘æ–‡ä»¶...
å…±æ‰¾åˆ° 300 ä¸ªéŸ³é¢‘æ–‡ä»¶

ğŸ“¦ æ‰¹æ¬¡ 1/60 (1-5)
  âœ… ä¸Šä¼ éŸ³é¢‘æˆåŠŸ: phrase_001.wav
  ...

ğŸ“Š éŸ³é¢‘ä¸Šä¼ ç»Ÿè®¡:
   æ€»è®¡: 300
   æˆåŠŸ: 150
   è·³è¿‡: 150
   å¤±è´¥: 0

ğŸ—‘ï¸  æ¸…ç©ºç°æœ‰æ•°æ®...
âœ… å·²æ¸…ç©ºç°æœ‰æ•°æ®

ğŸ“ å¼€å§‹æ’å…¥çŸ­è¯­æ•°æ®...
[1/100] âœ… æ’å…¥çŸ­è¯­: not at all
...

âœ¨ æ‰€æœ‰æ•°æ®ä¸Šä¼ æˆåŠŸï¼
```
