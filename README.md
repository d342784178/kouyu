# è‹±è¯­å£è¯­ç»ƒä¹ APP

ä¸€ä¸ªä¸“ä¸ºæå‡è‹±è¯­å£è¯­å¬åŠ›è®¾è®¡çš„Webåº”ç”¨ï¼Œå¸®åŠ©ç”¨æˆ·æŒæ¡è‹±è¯­è¿è¯»ã€å¼±è¯»ã€å¤±çˆ†ç­‰éŸ³å˜æŠ€å·§ã€‚

## ğŸ“± é¡¹ç›®æ¦‚è¿°

æœ¬é¡¹ç›®æ˜¯ä¸€ä¸ªåŸºäºNext.jså¼€å‘çš„è‹±è¯­å£è¯­ç»ƒä¹ åº”ç”¨ï¼ŒåŒ…å«100ä¸ªé«˜é¢‘è‹±è¯­è¿è¯»çŸ­è¯­ï¼Œæ¯ä¸ªçŸ­è¯­é…æœ‰è¯¦ç»†çš„éŸ³å˜è¯´æ˜å’ŒçœŸå®åœºæ™¯ä¾‹å¥ï¼Œå¸®åŠ©ç”¨æˆ·æ›´å¥½åœ°ç†è§£å’ŒæŒæ¡è‹±è¯­å£è¯­ä¸­çš„è¿è¯»æŠ€å·§ã€‚

### æ ¸å¿ƒåŠŸèƒ½

- **çŸ­è¯­åº“**: 100ä¸ªé«˜è´¨é‡è‹±è¯­è¿è¯»çŸ­è¯­ï¼Œè¦†ç›–æ—¥å¸¸é«˜é¢‘åœºæ™¯
- **éŸ³é¢‘æ’­æ”¾**: æ¯ä¸ªçŸ­è¯­å’Œä¾‹å¥éƒ½é…æœ‰çœŸäººå‘éŸ³éŸ³é¢‘
- **éŸ³å˜è¯´æ˜**: è¯¦ç»†çš„è¿è¯»ã€å¼±è¯»ã€å¤±çˆ†ç­‰éŸ³å˜æŠ€å·§è®²è§£
- **åœºæ™¯åˆ†ç±»**: æŒ‰å¯¹è¯ã€æ—¥å¸¸ç”Ÿæ´»ã€å·¥ä½œç­‰åœºæ™¯åˆ†ç±»
- **éš¾åº¦åˆ†çº§**: beginner/intermediate/advanced ä¸‰çº§éš¾åº¦

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

- **æ¡†æ¶**: Next.js 14 (App Router)
- **è¯­è¨€**: TypeScript
- **æ ·å¼**: Tailwind CSS
- **æ•°æ®åº“**: PostgreSQL (Neon) + Drizzle ORM
- **å­˜å‚¨**: Vercel Blob (éŸ³é¢‘æ–‡ä»¶)
- **éƒ¨ç½²**: Vercel

## ğŸ“ é¡¹ç›®ç»“æ„

```
kouyu/
â”œâ”€â”€ src/                          # æºä»£ç 
â”‚   â”œâ”€â”€ app/                      # Next.js App Router
â”‚   â”‚   â”œâ”€â”€ api/                  # APIè·¯ç”±
â”‚   â”‚   â”‚   â”œâ”€â”€ audio/            # éŸ³é¢‘ç›¸å…³API
â”‚   â”‚   â”‚   â””â”€â”€ phrases/          # çŸ­è¯­æ•°æ®API
â”‚   â”‚   â”œâ”€â”€ phrase-detail/        # çŸ­è¯­è¯¦æƒ…é¡µ
â”‚   â”‚   â”œâ”€â”€ phrase-library/       # çŸ­è¯­åº“é¡µé¢
â”‚   â”‚   â”œâ”€â”€ test/                 # æµ‹è¯•é¡µé¢
â”‚   â”‚   â”œâ”€â”€ layout.tsx            # æ ¹å¸ƒå±€
â”‚   â”‚   â””â”€â”€ page.tsx              # é¦–é¡µ
â”‚   â”œâ”€â”€ components/               # ç»„ä»¶
â”‚   â”‚   â””â”€â”€ BottomNav.tsx         # åº•éƒ¨å¯¼èˆª
â”‚   â”œâ”€â”€ hooks/                    # è‡ªå®šä¹‰Hooks
â”‚   â”‚   â””â”€â”€ useAudio.ts           # éŸ³é¢‘æ’­æ”¾Hook
â”‚   â”œâ”€â”€ lib/                      # å·¥å…·åº“
â”‚   â”‚   â””â”€â”€ db/                   # æ•°æ®åº“ç›¸å…³
â”‚   â”‚       â”œâ”€â”€ index.ts          # æ•°æ®åº“è¿æ¥
â”‚   â”‚       â””â”€â”€ schema.ts         # æ•°æ®åº“è¡¨ç»“æ„
â”‚   â””â”€â”€ styles/                   # æ ·å¼æ–‡ä»¶
â”‚       â””â”€â”€ globals.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ prepare/                      # æ•°æ®å‡†å¤‡
â”‚   â”œâ”€â”€ data/                     # æ•°æ®æ–‡ä»¶
â”‚   â”‚   â”œâ”€â”€ phrases_100_quality.json    # 100ä¸ªçŸ­è¯­JSONæ•°æ®
â”‚   â”‚   â”œâ”€â”€ phrases_100_quality.sql     # PostgreSQLæ’å…¥è„šæœ¬
â”‚   â”‚   â””â”€â”€ audio/                # éŸ³é¢‘æ–‡ä»¶(300ä¸ª)
â”‚   â”œâ”€â”€ scripts/                  # ä¸Šä¼ è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ upload_data.ts        # å®Œæ•´ä¸Šä¼ è„šæœ¬
â”‚   â”‚   â”œâ”€â”€ upload_audio_only.ts  # ä»…ä¸Šä¼ éŸ³é¢‘
â”‚   â”‚   â”œâ”€â”€ upload_database_only.ts # ä»…ä¸Šä¼ æ•°æ®
â”‚   â”‚   â””â”€â”€ generate_audio_*.py   # éŸ³é¢‘ç”Ÿæˆè„šæœ¬
â”‚   â””â”€â”€ docs/                     # æ–‡æ¡£
â”œâ”€â”€ prd/                          # äº§å“åŸå‹HTMLæ–‡ä»¶
â”œâ”€â”€ package.json                  # é¡¹ç›®ä¾èµ–
â””â”€â”€ ...                           # é…ç½®æ–‡ä»¶
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env.local` æ–‡ä»¶ï¼š

```env
# æ•°æ®åº“è¿æ¥
DATABASE_URL=postgresql://...

# Vercel Blob Token
BLOB_READ_WRITE_TOKEN=vercel_blob_rw_...
```

### 3. ä¸Šä¼ æ•°æ®

```bash
# ä¸Šä¼ éŸ³é¢‘åˆ°Vercel Blob + æ•°æ®åˆ°æ•°æ®åº“
npx ts-node prepare/scripts/upload_data.ts
```

### 4. å¯åŠ¨å¼€å‘æœåŠ¡å™¨

```bash
npm run dev
```

è®¿é—® http://localhost:3000

## ğŸ“Š æ•°æ®è¯´æ˜

### çŸ­è¯­æ•°æ®

- **æ€»æ•°**: 100ä¸ªé«˜è´¨é‡çŸ­è¯­
- **ä¾‹å¥**: 200ä¸ªçœŸå®åœºæ™¯ä¾‹å¥
- **éŸ³é¢‘**: 300ä¸ªWAVæ ¼å¼éŸ³é¢‘æ–‡ä»¶
- **åˆ†ç±»**: conversation/daily_life/work/social
- **éš¾åº¦**: beginner/intermediate/advanced

### æ•°æ®åº“è¡¨ç»“æ„

**phrases è¡¨** - çŸ­è¯­ä¸»è¡¨
- id, english, chinese, part_of_speech
- scene, difficulty, pronunciation_tips
- audio_url, created_at, updated_at

**phrase_examples è¡¨** - ç¤ºä¾‹å¥è¡¨
- id, phrase_id, title, desc
- english, chinese, usage
- audio_url, created_at, updated_at

## ğŸ“ ä¸»è¦é¡µé¢

| é¡µé¢ | è·¯å¾„ | è¯´æ˜ |
|-----|------|------|
| é¦–é¡µ | `/` | åº”ç”¨å…¥å£ |
| çŸ­è¯­åº“ | `/phrase-library` | æµè§ˆæ‰€æœ‰çŸ­è¯­ |
| çŸ­è¯­è¯¦æƒ… | `/phrase-detail` | æŸ¥çœ‹çŸ­è¯­è¯¦æƒ…å’Œä¾‹å¥ |
| æµ‹è¯• | `/test` | ç»ƒä¹ æµ‹è¯•é¡µé¢ |

## ğŸ› ï¸ å¼€å‘æŒ‡å—

### æ·»åŠ æ–°çŸ­è¯­

1. åœ¨ `prepare/data/phrases_100_quality.json` ä¸­æ·»åŠ æ•°æ®
2. ç”ŸæˆéŸ³é¢‘æ–‡ä»¶ï¼ˆå¦‚éœ€ï¼‰
3. è¿è¡Œä¸Šä¼ è„šæœ¬

### ç”ŸæˆéŸ³é¢‘

```bash
cd prepare/scripts
python generate_audio_quality.py
```

## ğŸ“¦ éƒ¨ç½²

é¡¹ç›®å·²é…ç½®Verceléƒ¨ç½²ï¼Œæ¨é€ä»£ç åˆ°GitHubåè‡ªåŠ¨éƒ¨ç½²ï¼š

```bash
vercel --prod
```

## ğŸ“„ ç›¸å…³æ–‡æ¡£

- [prepare/README.md](prepare/README.md) - æ•°æ®åŒ…è¯´æ˜
- [prepare/scripts/README.md](prepare/scripts/README.md) - ä¸Šä¼ è„šæœ¬è¯´æ˜
- [éœ€æ±‚æ–‡æ¡£.md](éœ€æ±‚æ–‡æ¡£.md) - äº§å“éœ€æ±‚æ–‡æ¡£

## ğŸ¤ è´¡çŒ®

æ¬¢è¿æäº¤Issueå’ŒPRï¼

## ğŸ“„ License

MIT License
