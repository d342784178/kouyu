# 语习集APP v2 增量需求文档

## 1. 版本概述

### 1.1 版本信息
- **版本号**: v2
- **版本名称**: 场景学习增强版
- **迭代日期**: 2026-02-17
- **基于版本**: v1

### 1.2 本版本目标
- 新增场景学习模块，提供真实对话场景练习
- 完善测试体系，支持多种题型（选择题、填空题、开放式对话）
- 优化交互体验，统一设计风格
- 引入AI对话功能，实现开放式对话练习

---

## 2. 新增功能

### 2.1 场景学习模块

#### 2.1.1 场景分类
| 功能ID | 功能名称 | 功能描述 | 优先级 |
|--------|---------|---------|--------|
| F-SCENE-001 | 场景分类展示 | 提供4类核心场景：日常问候、购物消费、餐饮服务、旅行出行 | P0 |
| F-SCENE-002 | 场景列表 | 展示各分类下的具体场景，包含难度、学习时长信息 | P0 |
| F-SCENE-003 | 场景搜索 | 支持按关键词搜索场景 | P1 |

#### 2.1.2 场景详情
| 功能ID | 功能名称 | 功能描述 | 优先级 |
|--------|---------|---------|--------|
| F-SCENE-004 | 对话展示 | 展示场景高频对话，支持文本+音频播放 | P0 |
| F-SCENE-005 | 对话解析 | 针对核心问答提供详细解析，包含同问题不同回答 | P0 |
| F-SCENE-006 | 高频单词 | 提取场景核心单词，提供音标、释义、例句 | P0 |
| F-SCENE-007 | 音频播放 | 支持单句播放和全部播放 | P0 |

#### 2.1.3 场景测试
| 功能ID | 功能名称 | 功能描述 | 优先级 |
|--------|---------|---------|--------|
| F-SCENE-008 | 选择题 | 基础文本选择题，考察场景理解 | P0 |
| F-SCENE-009 | 填空题 | 问答题形式，支持文本和语音输入 | P0 |
| F-SCENE-010 | 开放式对话 | AI驱动的对话练习，支持多轮对话 | P0 |
| F-SCENE-011 | AI评测 | 自动评测回答质量，提供评分和建议 | P0 |
| F-SCENE-012 | 测试结果 | 展示测试得分和AI评价分析 | P0 |

### 2.2 交互优化

#### 2.2.1 首页优化
| 功能ID | 功能名称 | 功能描述 | 优先级 |
|--------|---------|---------|--------|
| F-UI-001 | 场景学习入口 | 首页新增场景学习模块入口 | P0 |
| F-UI-002 | 场景分类快捷入口 | 首页展示场景分类快捷入口 | P0 |
| F-UI-003 | 学习进度卡片 | 优化学习进度展示，使用进度环 | P1 |

#### 2.2.2 底部导航优化
| 功能ID | 功能名称 | 功能描述 | 优先级 |
|--------|---------|---------|--------|
| F-UI-004 | 新增场景学习Tab | 底部导航新增场景学习入口 | P0 |
| F-UI-005 | 导航样式统一 | 统一底部导航样式和交互 | P1 |

---

## 3. 功能变更

### 3.1 短语库优化
- 优化短语卡片样式，统一使用圆角卡片
- 新增场景标签展示
- 优化筛选交互

### 3.2 测试模块优化
- 统一测试页面布局
- 优化进度条样式
- 新增题目类型标识卡片

---

## 4. 数据模型变更

### 4.1 新增数据表
- `scenes` - 场景表
- `scene_dialogues` - 场景对话表
- `scene_vocabulary` - 场景高频单词表
- `open_tests` - 开放式测试表
- `scene_test_questions` - 场景测试题表

### 4.2 数据模型关系
```
Scene (场景)
  ├── SceneDialogue (对话)
  │     └── DialogueRound (对话回合)
  │           └── DialogueContent (对话内容)
  ├── SceneVocabulary (高频单词)
  └── OpenTest (测试)
        └── SceneTestQuestion (测试题目)
```

---

## 5. 页面变更

### 5.1 新增页面
| 页面ID | 页面名称 | 路径 | 说明 |
|--------|---------|------|------|
| P-SCENE_LIST | 场景列表页 | /scene-list | 展示场景分类和列表 |
| P-SCENE_DETAIL | 场景详情页 | /scene-detail/[id] | 场景对话学习 |
| P-SCENE_TEST | 场景测试页 | /scene-test/[id] | 场景测试选择 |
| P-SCENE_TEST_QUESTION | 场景测试题页 | /scene-test/[id]/[testId] | 具体测试题目 |

### 5.2 修改页面
| 页面ID | 页面名称 | 变更内容 |
|--------|---------|----------|
| P-HOME | 首页 | 新增场景学习入口、场景分类快捷入口 |
| P-PHRASE_LIBRARY | 短语库页 | 优化卡片样式、筛选交互 |
| P-TEST | 测试页 | 统一测试页面样式 |

---

## 6. 技术实现

### 6.1 新增API
- `GET /api/scenes` - 获取场景列表
- `GET /api/scenes/[id]` - 获取场景详情
- `GET /api/scenes/[id]/dialogue` - 获取场景对话
- `GET /api/scenes/[id]/vocabulary` - 获取高频单词
- `GET /api/scenes/[id]/tests` - 获取场景测试列表
- `POST /api/open-test/initiate` - 初始化开放式对话
- `POST /api/open-test/continue` - 继续对话
- `POST /api/open-test/analyze` - 分析测试结果

### 6.2 AI能力
- 大语言模型对话生成
- 语音识别与评测
- 对话质量分析

---

## 7. 设计规范

### 7.1 交互风格
- 统一使用圆角卡片 (`rounded-card` 16px)
- 统一阴影规范 (`shadow-card`)
- 统一颜色系统
- 统一按钮样式

### 7.2 相关文档
- 交互风格说明文档: `/design/交互风格说明文档.md`
- 技术设计文档: `/demands/v2/设计文档/技术设计文档.md`
- 数据模型设计: `/demands/v2/设计文档/英语口语场景数据模型设计.md`

---

## 8. 实现状态

### 8.1 已实现功能
- ✅ 场景分类和列表展示
- ✅ 场景详情页（对话、解析、高频单词）
- ✅ 场景测试（选择题、填空题、开放式对话）
- ✅ AI对话和评测
- ✅ 首页场景学习入口
- ✅ 底部导航优化

### 8.2 待实现功能
- ❌ 用户登录/注册系统
- ❌ 学习记录持久化存储
- ❌ 学习计划制定
- ❌ 复习提醒推送
- ❌ 社交分享功能

---

## 9. 附录

### 9.1 变更记录
| 日期 | 变更内容 | 变更人 |
|------|---------|--------|
| 2026-02-17 | 创建v2增量需求文档 | AI Assistant |

### 9.2 相关链接
- 原型图: `/demands/v2/prd/`
- 全量需求文档: `/demands/v2/需求文档_全量.md`
